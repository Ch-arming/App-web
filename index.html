<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Control de MenÃº</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#6366f1">
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TpSIVBzuIOGSoThZERRy1CkWoEGqFVh1MLv2CJg1Jiouj4Fpw8GOx6uDirKuDqyAIfoA4OTopukiJ/0sKLWI9OO7Hu3uPu3eAUC8zzeoYBzTdNlOJuJjJropdr/AhiEEMIyQzy5iToiQ8x9c9fHy9i/Es73N/jj41azEAjwAHzDRsk68T+zZtg+M94YKyxKrwOXHVkhckfuS64vEb54LLPj4zFsm2eWKBWCy0sdLGrGRKcJ7YoUw65YXZo16SJq4y+/1ZlS5J3qQ3HcHFKJa2RyFsRQhJJyggo4oNVGCjTStOirjdJoMPujRhiZyVY8DCIo8VoESd52bx6V5T8T/7Wd3gDQ5qQSGg68WxPsaBbt0g0Nq39be39k58AniekGvd8GYdGL6T3u1oYRVoGQ1NrjtafHI6sL3DjNF0K7WnlS1NfH24n3hNnLt2vXWfk3cg9e0ykU/AQBASKHvd596+k3t+fZzWZfsGADhM6LXh0nKLqAAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFl6AAATHAAAExwAd/VNMAAAAZJJREFUWMPtlj9IAmEYxp+8hXAo20IcamtoCBucGgJbGhocGlroT1vQULQ5t0TL1ODQEBQc+gMeLS0NLkHQ4lBOTp7QJKLpUpC/hnfRS9DuTt9wAOHw973f9/K+77s8QojnH/VNhpMnhRByCgC8iPh5Wf8hAJn/8gK7/eN4AWtBq9UCT9p9S4T/GQAAM9PGz8RxHACRaLOWCjYKwOdyweN0iuzlZYhEIhgNh8Ek6zQajUEonhgUlhNO9TcbnAwCAERbxDEMnEKC/f/YrVYLPqhOKA==">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>ğŸ½ï¸ Control de MenÃº</h1>
                <div class="header-buttons">
                    <button id="open-config-button" class="config-button" title="ConfiguraciÃ³n">
                        âš™ï¸
                    </button>
                </div>
            </div>
        </header>

        <!-- Asistente IA -->
        <section class="ai-section">
            <div class="ai-header">
                <h2>ğŸ¤– Asistente IA</h2>
                <button id="toggle-ai" class="toggle-button">Ocultar IA</button>
            </div>
            
            <div id="ai-container" class="ai-container">
                <!-- Chat Messages -->
                <div id="chat-container" class="chat-container">
                    <div id="chat-messages" class="chat-messages">
                        <div class="message assistant-message">
                            <div class="message-avatar">ğŸ¤–</div>
                            <div class="message-content">
                                Â¡Hola! Soy tu asistente IA para el restaurante. Â¿En quÃ© puedo ayudarte hoy?
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Input Controls -->
                <div class="input-controls">
                    <div class="input-group">
                        <input type="text" id="user-input" placeholder="Escribe tu mensaje..." class="message-input">
                        <button id="send-button" class="send-button">ğŸ“¤</button>
                        <button id="voice-button" class="voice-button" title="Hablar">ğŸ¤</button>
                        <button id="toggle-voice" class="voice-toggle" title="Activar/Desactivar voz">ğŸ”Š</button>
                    </div>
                </div>

                <!-- Camera Controls -->
                <div class="camera-controls">
                    <button id="open-camera-button" class="camera-button">
                        ğŸ“· Analizar Comanda
                    </button>
                    <input type="file" id="comanda-file-input" accept="image/*" class="file-input">
                    <label for="comanda-file-input" class="file-button">
                        ğŸ“ Cargar Archivo
                    </label>
                </div>
            </div>
        </section>

        <!-- Menu Control Section -->
        <section class="menu-section">
            <div class="section-header">
                <h2>ğŸ“‹ Control de MenÃº Diario</h2>
            </div>
            
            <div class="menu-grid">
                <div class="menu-card">
                    <h3>Platos Disponibles</h3>
                    <div class="available-dishes" id="available-dishes">
                        <div class="dish-item">
                            <span class="dish-name">ğŸ¥— Ensalada CÃ©sar</span>
                            <span class="dish-price">$12.99</span>
                            <span class="dish-status available">Disponible</span>
                        </div>
                        <div class="dish-item">
                            <span class="dish-name">ğŸ Pasta Carbonara</span>
                            <span class="dish-price">$14.99</span>
                            <span class="dish-status available">Disponible</span>
                        </div>
                        <div class="dish-item">
                            <span class="dish-name">ğŸ¥© Filete de Res</span>
                            <span class="dish-price">$24.99</span>
                            <span class="dish-status unavailable">Agotado</span>
                        </div>
                    </div>
                </div>
                
                <div class="menu-card">
                    <h3>EstadÃ­sticas del DÃ­a</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-number">45</div>
                            <div class="stat-label">Ã“rdenes</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">$680</div>
                            <div class="stat-label">Ventas</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">12</div>
                            <div class="stat-label">Platos Top</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">95%</div>
                            <div class="stat-label">SatisfacciÃ³n</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Camera Modal -->
    <div id="camera-modal" class="modal">
        <div class="modal-content camera-modal-content">
            <div class="modal-header">
                <h3>ğŸ“· Capturar Comanda</h3>
                <button id="close-camera-button" class="close-button">âœ–ï¸</button>
            </div>
            
            <div class="camera-container">
                <video id="camera-preview" class="camera-preview" autoplay muted playsinline></video>
                <canvas id="capture-canvas" class="capture-canvas"></canvas>
                
                <div id="image-preview-container" class="image-preview-container">
                    <img id="preview-image" class="preview-image" alt="Vista previa">
                </div>
            </div>
            
            <div class="camera-controls-modal">
                <button id="switch-camera-button" class="camera-control-button">
                    ğŸ”„ Cambiar CÃ¡mara
                </button>
                <button id="capture-image-button" class="camera-control-button primary">
                    ğŸ“¸ Capturar
                </button>
                <button id="analyze-button" class="camera-control-button analyze" style="display: none;">
                    ğŸ” Analizar Comanda
                </button>
            </div>
        </div>
    </div>

    <!-- Configuration Modal -->
    <div id="config-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>âš™ï¸ ConfiguraciÃ³n API</h3>
                <button id="close-config-button" class="close-button">âœ–ï¸</button>
            </div>
            
            <div class="config-content">
                <div class="config-section">
                    <h4>ğŸ”‘ Clave API de Gemini</h4>
                    <p class="config-description">
                        Para usar el asistente IA, necesitas una clave API de Google Gemini.
                        <br><strong>CÃ³mo obtenerla:</strong>
                    </p>
                    <ol class="config-steps">
                        <li>Ve a <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a></li>
                        <li>Inicia sesiÃ³n con tu cuenta de Google</li>
                        <li>Haz clic en "Create API Key"</li>
                        <li>Selecciona un proyecto o crea uno nuevo</li>
                        <li>Copia la clave generada y pÃ©gala aquÃ­</li>
                    </ol>
                    
                    <div class="input-group">
                        <input type="password" id="api-key-input" placeholder="Pega tu API key aquÃ­..." class="config-input">
                        <button id="save-config" class="save-button">ğŸ’¾ Guardar</button>
                    </div>
                    
                    <div class="config-note">
                        <strong>âš ï¸ Nota de Seguridad:</strong> Tu clave API se guarda solo en tu dispositivo.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="ai-assistant.js"></script>
</body>
</html>